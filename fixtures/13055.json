{"issue":{"id":13055,"project":{"id":60,"name":"HMT VuFind3"},"tracker":{"id":12,"name":"Bug / Fehlermeldung"},"status":{"id":3,"name":"bitte prüfen"},"priority":{"id":2,"name":"hoch"},"author":{"id":52,"name":"Antje Burghardt (HMT Leipzig)"},"assigned_to":{"id":13,"name":"Martin Czygan"},"fixed_version":{"id":114,"name":"HMT (de_l152) - II"},"subject":"Datensammlung IMSLP (SID 15) fehlt ","description":"Lieber Herr Aumüller,\r\n\r\nheute ist aufgefallen, dass die Daten aus der IMSLP (SID 15) im MT-Katalog fehlen.\r\nKann dies möglichst schnell behoben werden?\r\nBitte dabei den Hinweis aus #12662 beachten.\r\n\r\nDanke,\r\nAntje Burghardt","start_date":"2018-04-24","done_ratio":50,"custom_fields":[{"id":3,"name":"Kategorie","value":""}],"created_on":"2018-04-24T13:20:06Z","updated_on":"2018-04-25T19:26:02Z","attachments":[{"id":5894,"filename":"15_fieldmap.json","filesize":6071893,"content_type":"application/json","description":"","content_url":"http://projekte.ub.uni-leipzig.de/attachments/download/5894/15_fieldmap.json","author":{"id":263,"name":"Robert Schenk"},"created_on":"2018-04-25T19:23:29Z"}],"changesets":[{"revision":"711d2a18ad2dccf43212081c3bb6b6bec60c5775","user":{"id":13,"name":"Martin Czygan"},"comments":"imslp: add note, refs #13055","committed_on":"2018-04-24T13:49:59Z"},{"revision":"1a23fc4b22981d9d7a71c2ddbfe9903ac2518330","user":{"id":13,"name":"Martin Czygan"},"comments":"Merge branch 'master' of github.com:miku/siskin\n\n* 'master' of github.com:miku/siskin:\n  imslp: add note, refs #13055\n  imslp: debug flag\n  73: include marcbinary conversion\n  docs: remove reqs.png, comments expire fast\n  marburg: fix OAI endpoint","committed_on":"2018-04-25T07:59:23Z"},{"revision":"f2341efe9893ea15c7df973732ee66ce2d8711d5","user":{"id":13,"name":"Martin Czygan"},"comments":"15: prepare mapping and new data layout, refs #13055, refs #12288","committed_on":"2018-04-25T19:17:15Z"},{"revision":"f7b778aad9729ea1d410058452da77181808f570","user":{"id":13,"name":"Martin Czygan"},"comments":"Merge branch 'master' of github.com:miku/siskin\n\n* 'master' of github.com:miku/siskin:\n  15: prepare mapping and new data layout, refs #13055, refs #12288\n  setup: adjust dependencies\n  v0.16.4\n  Update simplejson from 3.13.2 to 3.14.0\n  refs #13016 * restore old morph.xml * add second collection\n  127: add second collection, refs #13016","committed_on":"2018-04-26T10:45:57Z"},{"revision":"325136ff4b52d787c67a2c0ffbda21be2a68499e","user":{"id":13,"name":"Martin Czygan"},"comments":"add scrape_html_listing for imslp, refs #13055","committed_on":"2018-05-14T12:46:50Z"},{"revision":"ab1fe32004a9b1f275903a0642ae77ff74192312","user":{"id":13,"name":"Martin Czygan"},"comments":"add conversions module, refs #13055\n\nComplement assets. First converter, imslp coversion without tarball\nextraction.","committed_on":"2018-05-14T21:50:32Z"},{"revision":"bc3f791b1762cf78b62032e708c0cd2bc2d423c4","user":{"id":13,"name":"Martin Czygan"},"comments":"imslp: add IMSLPConvertNext, refs #13055","committed_on":"2018-05-14T21:51:49Z"}],"journals":[{"id":87863,"user":{"id":64,"name":"David Aumüller (UBL)"},"notes":"SID 15 wurde komplett abgesigelt, da in FincMARC 980|c @Petrucci-Musikbibliothek@ steht, in AMSL jedoch @Petrucci Musikbibliothek@.\r\n","created_on":"2018-04-24T13:26:25Z","details":[]},{"id":87865,"user":{"id":263,"name":"Robert Schenk"},"notes":"In der aktuellen Importdatei ist der Kollektionsname ohne Bindestrich:\r\n\r\n\u003cpre\u003e\r\n856    $3 Petrucci Musikbibliothek $u http://imslp.org/wiki/12_Allemandes,_Op.4_(Weber,_Carl_Maria_von) $q text/html\r\n\u003c/pre\u003e\r\n\r\nVielleicht muss bloß ein neuer Import angestoßen werden, um das Problem zu beheben?","created_on":"2018-04-24T13:33:04Z","details":[]},{"id":87867,"user":{"id":64,"name":"David Aumüller (UBL)"},"notes":"In der dem Importprozess regelmäßig vorliegenden Datei @/var/nfs-siskin-data/15/IMSLPConvert/date-2017-12-25.fincmarc.mrc@ ist das noch anders.\r\n\r\nVersuch, Datei neu zu erstellen:\r\n\r\n{{collapse(1)\r\n\r\n\u003cpre\u003e\r\n[root@metafacture ~]# /usr/bin/taskdo IMSLPConvert --local-scheduler\r\n[2018-04-24 15:37:07][luigi-interface][INFO    ] Informed scheduler that task   IMSLPConvert_2018_04_24_ca08823ce1   has status   DONE\r\n[2018-04-24 15:37:07][luigi-interface][INFO    ] Done scheduling tasks\r\n[2018-04-24 15:37:07][luigi-interface][INFO    ] Running Worker with 1 processes\r\n[2018-04-24 15:37:07][luigi-interface][INFO    ] Worker Worker(salt=718457708, workers=1, host=metafacture.ub.uni-leipzig.de, username=root, pid=22243) was stopped. Shutting down Keep-Alive thread\r\n[2018-04-24 15:37:07][luigi-interface][INFO    ] \r\n===== Luigi Execution Summary =====\r\n\r\nScheduled 1 tasks of which:\r\n* 1 present dependencies were encountered:\r\n    - 1 IMSLPConvert(date=2018-04-24)\r\n\r\nDid not run any tasks\r\nThis progress looks :) because there were no failed tasks or missing external dependencies\r\n\r\n===== Luigi Execution Summary =====\r\n\u003c/pre\u003e\r\n}}\r\n\r\n{{collapse(2)\r\n\u003cpre\u003e\r\n[root@metafacture ~]# mv /usr/local/siskin-data/15/IMSLPConvert/date-2017-12-25.fincmarc.mrc /tmp\r\n[root@metafacture ~]# /usr/bin/taskdo IMSLPConvert --local-scheduler\r\n[2018-04-24 15:37:53][luigi-interface][INFO    ] Informed scheduler that task   IMSLPConvert_2018_04_24_ca08823ce1   has status   PENDING\r\n[2018-04-24 15:37:53][luigi-interface][INFO    ] Informed scheduler that task   IMSLPDownload_2018_04_24_ca08823ce1   has status   DONE\r\n[2018-04-24 15:37:53][luigi-interface][INFO    ] Done scheduling tasks\r\n[2018-04-24 15:37:53][luigi-interface][INFO    ] Running Worker with 1 processes\r\n[2018-04-24 15:37:53][luigi-interface][INFO    ] [pid 22308] Worker Worker(salt=973972676, workers=1, host=metafacture.ub.uni-leipzig.de, username=root, pid=22308) running   IMSLPConvert(date=2018-04-24)\r\n[2018-04-24 15:37:53][gluish][DEBUG   ] (set -o pipefail \u0026\u0026 tar -xzf /usr/local/siskin-data/15/IMSLPDownload/date-2017-12-25.tar.gz -C /tmp/siskin-VE5u_j)\r\n[2018-04-24 15:38:02][gluish][DEBUG   ] (set -o pipefail \u0026\u0026 python /usr/lib/python2.7/site-packages/siskin/assets/15/15_marcbinary.py /tmp/siskin-VE5u_j /tmp/gluish-4C2UOi)\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/siskin/assets/15/15_marcbinary.py\", line 165, in \u003cmodule\u003e\r\n    record = record[\"document\"]\r\nKeyError: 'document'\r\n[2018-04-24 15:38:03][gluish][ERROR   ] (set -o pipefail \u0026\u0026 python /usr/lib/python2.7/site-packages/siskin/assets/15/15_marcbinary.py /tmp/siskin-VE5u_j /tmp/gluish-4C2UOi): 1\r\n[2018-04-24 15:38:03][luigi-interface][ERROR   ] [pid 22308] Worker Worker(salt=973972676, workers=1, host=metafacture.ub.uni-leipzig.de, username=root, pid=22308) failed    IMSLPConvert(date=2018-04-24)\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/luigi/worker.py\", line 203, in run\r\n    new_deps = self._run_get_new_deps()\r\n  File \"/usr/lib/python2.7/site-packages/luigi/worker.py\", line 140, in _run_get_new_deps\r\n    task_gen = self.task.run()\r\n  File \"/usr/lib/python2.7/site-packages/siskin/sources/imslp.py\", line 81, in run\r\n    script=self.assets('15/15_marcbinary.py'), tempdir=tempdir)\r\n  File \"/usr/lib/python2.7/site-packages/gluish/utils.py\", line 141, in shellout\r\n    raise error\r\nRuntimeError: (set -o pipefail \u0026\u0026 python /usr/lib/python2.7/site-packages/siskin/assets/15/15_marcbinary.py /tmp/siskin-VE5u_j /tmp/gluish-4C2UOi) exitcode: 1\r\n[2018-04-24 15:38:03][luigi-interface][INFO    ] Informed scheduler that task   IMSLPConvert_2018_04_24_ca08823ce1   has status   FAILED\r\n[2018-04-24 15:38:03][luigi-interface][INFO    ] Worker Worker(salt=973972676, workers=1, host=metafacture.ub.uni-leipzig.de, username=root, pid=22308) was stopped. Shutting down Keep-Alive thread\r\n[2018-04-24 15:38:03][luigi-interface][INFO    ] \r\n===== Luigi Execution Summary =====\r\n\r\nScheduled 2 tasks of which:\r\n* 1 present dependencies were encountered:\r\n    - 1 IMSLPDownload(date=2018-04-24)\r\n* 1 failed:\r\n    - 1 IMSLPConvert(date=2018-04-24)\r\n\r\nThis progress looks :( because there were failed tasks\r\n\r\n===== Luigi Execution Summary =====\r\n\u003c/pre\u003e\r\n}}\r\n\r\nMartin, Robert, ist evtl. der siskin-Task veraltet?","created_on":"2018-04-24T13:39:50Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"3"},{"property":"attr","name":"assigned_to_id","old_value":"64","new_value":"13"}]},{"id":88018,"user":{"id":263,"name":"Robert Schenk"},"notes":"Martin und ich sind gerade dabei, den siskin-Task zu aktualisieren.\r\nAufgrund der Entscheidung, die neuen Exportdaten mit der nur in\r\nden alten Exportdaten enthaltenen VIAF-ID und dem deutschen\r\nWerktitel anzureichern, ist der Workflow diesmal etwas schwieriger,\r\nweil mehr Abhängigkeiten berücksichtigt werden müssen.\r\n\r\nUm das Ganze etwas zu vereinfachen, haben wir die VIAF-ID und\r\nden Werktitel aus den alten Daten extrahiert und eine json-Datei\r\nerstellt. Diese kann fortan zur Anreicherung der zukünftigen Exports\r\nverwendet werden, so dass zumindest ein Arbeitsschritt eingespart\r\nwerden kann.\r\n\r\nIch hänge die Datei zur Sicherheit ans Ticket.","created_on":"2018-04-25T19:26:02Z","details":[{"property":"attachment","name":"5894","new_value":"15_fieldmap.json"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"50"}]}]}}